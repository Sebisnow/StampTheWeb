{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}
{% block title %}Timestamp web articles Regularly - Stamp the Web{% endblock %}
{% block page_content %}

<meta charset='utf-8'>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<link href='http://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="/pdf/bower_components/simple/stylesheets/pygment_trac.css" />
<link rel="stylesheet" href="/pdf/lib/css/simple-map-d3.css">

<script type="text/javascript" src="/pdf/bower_components/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/pdf/bower_components/d3/d3.min.js"></script>
<script type="text/javascript" src="/pdf/bower_components/topojson/topojson.js"></script>
<script type="text/javascript" src="/pdf/lib/js/simple-map-d3-block.js"></script>



<script type="text/javascript">
  (function($) {
    $(document).ready(function() {
      var worldMap = SimpleMapD3({
        container: '.simple-map-d3-world-map',
        datasource: '/pdf/country-map.geo.json',
        projection: 'equirectangular',
        colorOn: true,
        colorProperty: 'Location_no',
        colorSet: 'Paired',
        colorScale: 'quantize',
        tooltipOn: true,
        graticuleOn: true,
        globeOn: true,
        legendOn: false,
        legendScale: 0,
        legendDragOn: true,
        canvasDragOn: true,
        startManually: true
      }).start();
    });
  })(jQuery);
  function loading(){
    url = document.getElementById('urlSite');
    if(ValidURL(url.value)){
        $("#loading").show();
        $("#content").hide();
    }
  }
  function ValidURL(str) {
  var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
  '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|'+ // domain name
  '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
  '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
  '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
  '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
  return pattern.test(str);;
  }
</script>
<div id="loading"></div>
<div id="content">
<div class="page-header">
    <h6 class="text-right">Hello, <mark>{% if current_user.is_authenticated %}{{ current_user.username }}{% else %}Stranger{% endif %}!</mark></h6>
</div>
<div class="container">
{% if current_user.can(Permission.WRITE_ARTICLES) %}
  <ul class="nav nav-tabs">
    <li class="active"></span>
        <a data-toggle="tab" href="#home" aria-expanded="true">Schedule Time-stamp <span id="linkIcon" class="glyphicon glyphicon-calendar"></a></li>
    <li><a data-toggle="tab" href="#map" aria-expanded="true">View Locations <span id="hashIcon" class="glyphicon glyphicon-map-marker"></a></li>
  </ul>
  <div class="tab-content">
    <div id="home" class="tab-pane fade in active" style="width: 50%">
      <h3>Submit URL to be Regularly Checked for Changes in Different countries</h3>
        {{ wtf.quick_form(form, button_map={'submit':'primary'}) }}
    </div>
    <div id="map" class="tab-pane fade in active" style="width: 50%">
        <h3>Exact Locations from where it is regularly checked <span class="glyphicon glyphicon-map-marker"></span> </h3>
        <div  class="simple-map-d3-world-map" style="background-color: #FFFFFF; width: 100%; height: 400px; border: 1px solid #898989; margin: 0 0 1em 0;">
        </div>

    </div>
  </div>
  {% endif %}

{% include '_regular.html' %}

{% if pagination %}
<div class="pagination">
    {{ macros.pagination_widget(pagination, '.compare_country') }}
</div>
{% endif %}
{% endblock %}
{% block scripts %}
{{ super() }}
{{ pagedown.include_pagedown() }}
{% endblock %}
