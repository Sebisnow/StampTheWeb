<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<h1>python - Flask logging - Cannot get it to write to a file - Stack Overflow</h1><html><body><div><div class="post-text" itemprop="text">&#13;
<p>Why not do it like this:</p>

<pre><code>if __name__ == '__main__':
    init_db()  # or whatever you need to do

    import logging
    logging.basicConfig(filename='error.log',level=logging.DEBUG)

    app.run(host="0.0.0.0")
</code></pre>

<p>If you now start you application, you'll see that error.log contains:</p>

<pre><code>INFO:werkzeug: * Running on http://0.0.0.0:5000/
</code></pre>

<p>For more info, visit <a href="http://docs.python.org/2/howto/logging.html">http://docs.python.org/2/howto/logging.html</a></p>

<p>Okay, as you insist that you cannot have two handler with the method I showed you, I'll add an example that makes this quite clear. First, add this logging code to your main:</p>

<pre><code>import logging, logging.config, yaml
logging.config.dictConfig(yaml.load(open('logging.conf')))
</code></pre>

<p>Now also add some debug code, so that we see that our setup works:</p>

<pre><code>logfile    = logging.getLogger('file')
logconsole = logging.getLogger('console')
logfile.debug("Debug FILE")
logconsole.debug("Debug CONSOLE")
</code></pre>

<p>All what is left is the "logging.conf" program. Let's use that:</p>

<pre><code>version: 1
formatters:
  hiformat:
    format: 'HI %(asctime)s - %(name)s - %(levelname)s - %(message)s'
  simple:
    format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
handlers:
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: hiformat
    stream: ext://sys.stdout
  file:
    class: logging.FileHandler
    level: DEBUG
    formatter: simple
    filename: errors.log
loggers:
  console:
    level: DEBUG
    handlers: [console]
    propagate: no
  file:
    level: DEBUG
    handlers: [file]
    propagate: no
root:
  level: DEBUG
  handlers: [console,file]
</code></pre>

<p>This config is more complicated than needed, but it also shows some features of the logging module.</p>

<p>Now, when we run our application, we see this output (werkzeug- and console-logger):</p>

<pre><code>HI 2013-07-22 16:36:13,475 - console - DEBUG - Debug CONSOLE
HI 2013-07-22 16:36:13,477 - werkzeug - INFO -  * Running on http://0.0.0.0:5000/
</code></pre>

<p>Also note that the custom formatter with the "HI" was used.</p>

<p>Now look at the "errors.log" file. It contains:</p>

<pre><code>2013-07-22 16:36:13,475 - file - DEBUG - Debug FILE
2013-07-22 16:36:13,477 - werkzeug - INFO -  * Running on http://0.0.0.0:5000/
</code></pre>
    </div>&#13;
    </div></body></html></body>