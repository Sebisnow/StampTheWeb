<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<h1>SQLAlchemy core find if row exists : Python</h1><html><body><div><div class="usertext-body may-blank-within md-container "><div class="md"><p>I would have thought there would be obvious answer to this everywhere but extensive Googling hasn't turned up an obvious answer.</p>

<p>What is the most effective way to find out if a row with a given primary key exists?</p>

<p>I'm using SQLAlchemy core with sqlite on Python 3.</p>

<p>Here's what I am doing, is there a better way?</p>

<pre><code>from sqlalchemy.ext.automap import automap_base
from sqlalchemy import create_engine, exists
from sqlalchemy.schema import Table
from sqlalchemy.schema import MetaData
from sqlalchemy.sql import select

Base = automap_base()
engine = create_engine("sqlite:////home/ubuntu/crowdwave/src/crowdwave/archives.db")
conn = engine.connect()
# reflect the tables
Base.prepare(engine, reflect=True)
meta = MetaData()
messages = Table('messages', meta, autoload=True, autoload_with=engine)
s = select([messages.c.message_id_hash]).where(messages.c.message_id_hash=='GQWMEJ3DJYPFDH2NJEDOIDZ3W2YBUFYP')
result = conn.execute(s)
print(result.first())
</code></pre>
</div>
</div></div></body></html></body>